<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="len.cloud02.blog_service.mapper.UserMapper">
    <insert id="addUser">
        INSERT INTO
            user(avatar, createTime, email, nickname, password, type, updateTime, username)
        VALUES
            (#{avatar}, #{createTime}, #{email}, #{nickname}, #{password}, #{type}, #{updateTime}, #{username})
    </insert>

    <insert id="addBlog">
        INSERT INTO blog(title, content, views, likes, state, createTime, updateTime, typeId, userId, username, userEmail, userAvatar)
        VALUES (#{title}, #{content}, #{views}, #{likes}, #{state}, #{createTime}, #{updateTime}, #{typeId}, #{userId}, #{username}, #{userEmail}, #{userAvatar})
    </insert>

    <update id="updateBlog">
        UPDATE blog SET title=#{title}, content=#{content}, views=#{views}, likes=#{likes}, state=#{state}, createTime=#{createTime}, updateTime=#{updateTime}, typeId=#{typeId}, userId=#{userId}, username=#{username}, userEmail=#{userEmail}, userAvatar=#{userAvatar} WHERE id = #{id}
    </update>


    <select id="getUserByUsername" resultType="len.cloud02.blog_service.entity.User">
        SELECT * FROM user WHERE username = #{username} LIMIT 1;
    </select>

    <select id="getUserByUsernameAndPassword" resultType="len.cloud02.blog_service.entity.User">
        SELECT * FROM user WHERE username = #{username} AND password = #{password};
    </select>

</mapper>